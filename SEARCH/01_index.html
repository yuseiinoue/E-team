<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ¤œç´¢ - NIIGATA TOURISM</title>
  <link rel="stylesheet" href="../style.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app">
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header>
      <img src="../images/tag.png" alt="NIIGATA TOURISM APP" class="logo" style="display:block; margin:0 auto;"/>
      <div class="menu-icon" onclick="toggleMenu()">â˜°</div>
    </header>
    <!-- ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼ˆæš—èƒŒæ™¯ï¼‰ -->
      <div class="overlay" id="overlay" onclick="toggleMenu()"></div>

      <!-- ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
      <div class="side-menu" id="sideMenu">
        <ul>
          <li><a href="#">ãŠçŸ¥ã‚‰ã›</a></li>
          <li class="section-header">ğŸ”½SNS</li>
          <li><a href="https://www.instagram.com/niigata_japan_/">Instagram</a></li>
          <li><a href="https://x.com/umasaniigata">X</a></li>
          <li><a href="https://www.facebook.com/umasaniigata">Facebook</a></li>
          <li><a href="https://page.line.me/tev4586r?openQrModal=true">LINE</a></li>
          <li class="section-header">ğŸ”½ãã®ä»–</li>
          <li><a href="#">ã“ã®ã‚¢ãƒ—ãƒªã«ã¤ã„ã¦</a></li>
          <li><a href="#">åˆ©ç”¨è¦ç´„</a></li>
          <li><a href="#">ãŠå•ã„åˆã‚ã›</a></li>
          <li><a href="#">ãƒ˜ãƒ«ãƒ—ã¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</a></li>
          <!-- å¿…è¦ã«å¿œã˜ã¦è¿½åŠ å¯èƒ½ -->
        </ul>
      </div>
    <!-- ãƒ¡ã‚¤ãƒ³ -->
<main class="search-page">
  <!-- æ¤œç´¢ãƒãƒ¼ -->
  <!-- æ¤œç´¢ãƒãƒ¼ -->
  <div class="search-bar">
    <input type="text" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢" id="keywordInput">
    <button onclick="applyFilters()">ğŸ”</button>
  </div>
  <!-- é¸æŠä¸­ã®æ¡ä»¶è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
  <div id="selectedFilters" class="selected-filters" style="margin: 10px 0;"></div>
  <!-- ãƒªã‚»ãƒƒãƒˆ -->
  <div id="activeFilters" style="text-align:center; margin-bottom: 1em;"></div>


  <!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼UIå…¨ä½“ï¼ˆã‚¸ãƒ£ãƒ³ãƒ«ã‚„åœ°åŸŸã®é¸æŠãƒœã‚¿ãƒ³ãªã©ï¼‰ -->
  <div id="filterUI">
    <!-- ã‚¸ãƒ£ãƒ³ãƒ«é¸æŠï¼ˆ3x2ã®ç”»åƒãƒœã‚¿ãƒ³ï¼‰ -->
    <h2 class="section-title">ã‚¸ãƒ£ãƒ³ãƒ«åˆ¥æ¤œç´¢</h2>
    <div class="genre-grid">
      <button class="genre-item" data-genre="é£Ÿäº‹"><img src="images/food.png" alt="é£Ÿäº‹"><span>é£Ÿäº‹</span></button>
      <button class="genre-item" data-genre="è¦³å…‰"><img src="images/sightseeing.png" alt="è¦³å…‰"><span>è¦³å…‰</span></button>
      <button class="genre-item" data-genre="è‡ªç„¶"><img src="images/nature.png" alt="è‡ªç„¶"><span>è‡ªç„¶</span></button>
      <button class="genre-item" data-genre="ã‚¤ãƒ™ãƒ³ãƒˆ"><img src="images/event.png" alt="ã‚¤ãƒ™ãƒ³ãƒˆ"><span>ã‚¤ãƒ™ãƒ³ãƒˆ</span></button>
      <button class="genre-item" data-genre="ä½“é¨“"><img src="images/active.png" alt="ä½“é¨“"><span>ä½“é¨“</span></button>
      <button class="genre-item" data-genre="å®¿æ³Š"><img src="images/inn.png" alt="å®¿æ³Š"><span>å®¿æ³Š</span></button>
    </div>

    <!-- ã‚¨ãƒªã‚¢åˆ¥æ¤œç´¢ -->
    <h2 class="section-title">ã‚¨ãƒªã‚¢åˆ¥æ¤œç´¢</h2>
    <div class="area-buttons">
      <button onclick="filterArea('ä¸‹è¶Šåœ°æ–¹')">ä¸‹è¶Šåœ°æ–¹</button>
      <button onclick="filterArea('ä¸­è¶Šåœ°æ–¹')">ä¸­è¶Šåœ°æ–¹</button>
      <button onclick="filterArea('ä¸Šè¶Šåœ°æ–¹')">ä¸Šè¶Šåœ°æ–¹</button>
      <button onclick="filterArea('ä½æ¸¡åœ°æ–¹')">ä½æ¸¡åœ°æ–¹</button>
    </div>
    <br>
  </div>


  <!-- çµæœä¸€è¦§ -->
  <h2 class="section-title">ä¸€è¦§</h2>
  <div id="searchResults" class="results">
    <!-- åˆæœŸçŠ¶æ…‹ã§ã¯ã™ã¹ã¦è¡¨ç¤º -->
    <div class="result-item" data-genre="è‡ªç„¶" data-area="ä¸‹è¶Šåœ°æ–¹" data-title="å¼¥å½¦å±±ãƒ­ãƒ¼ãƒ—ã‚¦ã‚§ã‚¤">
      <img src="../images/sample1.jpg" alt="è¦³å…‰åœ°1">
      <h4>å¼¥å½¦å±±ãƒ­ãƒ¼ãƒ—ã‚¦ã‚§ã‚¤</h4>
      <p>è‡ªç„¶ï½œä¸‹è¶Šåœ°æ–¹</p>
    </div>

    <div class="result-item" data-genre="è¦³å…‰" data-area="ä¸­è¶Šåœ°æ–¹" data-title="ãƒãƒªãƒ³ãƒ”ã‚¢æ—¥æœ¬æµ·">
      <img src="../images/sample2.jpg" alt="è¦³å…‰åœ°2">
      <h4>ãƒãƒªãƒ³ãƒ”ã‚¢æ—¥æœ¬æµ·</h4>
      <p>è¦³å…‰ï½œä¸­è¶Šåœ°æ–¹</p>
    </div>
<!-- è¿½åŠ ã‚¢ã‚¤ãƒ†ãƒ ã‚‚åŒæ§˜ã« -->

    <!-- ...å¿…è¦ãªã ã‘è¿½åŠ  -->
  </div>
</main>


    <!-- ä¸‹éƒ¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
    <nav>
      <a href="../HOME/01_index.html" class="nav-item">
        <span><img src="../images/home.png" alt="home"></span>ãƒ›ãƒ¼ãƒ 
      </a>
      <a href="../SEARCH/01_index.html" class="nav-item">
        <span><img src="../images/search.png" alt="search"></span>æ¤œç´¢
      </a>
      <a href="../MYPAGE/01_index.html" class="nav-item">
        <span><img src="../images/profile.png" alt="search"></span>ãƒã‚¤ãƒšãƒ¼ã‚¸
      </a>
    </nav>
  </div>
  <script>
    // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã§é¸æŠä¸­ã®é …ç›®ã«ã‚¢ã‚¯ãƒ†ã‚£ãƒ–
    document.addEventListener("DOMContentLoaded", function () {
        const links = document.querySelectorAll(".menu-link");
        links.forEach(link => {
          link.addEventListener("click", function () {
            links.forEach(l => l.classList.remove("active"));
            this.classList.add("active");
          });
        });
      });
      // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®é–‹é–‰å‡¦ç†
    function toggleMenu() {
      const menu = document.getElementById('sideMenu');
      const overlay = document.getElementById('overlay');
      menu.classList.toggle('open');
      overlay.classList.toggle('show');
    }
    // æ¤œç´¢
  let selectedGenre = '';
let selectedArea = '';

// ã‚¸ãƒ£ãƒ³ãƒ«ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ï¼ˆé¸æŠã®ã¿ï¼‰
document.querySelectorAll('.genre-item').forEach(button => {
  button.addEventListener('click', () => {
    // ãƒœã‚¿ãƒ³ã®é¸æŠã‚¹ã‚¿ã‚¤ãƒ«
    document.querySelectorAll('.genre-item').forEach(b => b.classList.remove('selected'));
    button.classList.add('selected');

    selectedGenre = button.dataset.genre;
    // applyFilters()ã¯å‘¼ã°ãªã„ï¼
  });
});

  // ã‚¨ãƒªã‚¢ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚
  document.querySelectorAll('.area-buttons button').forEach(button => {
  button.addEventListener('click', () => {
    document.querySelectorAll('.area-buttons button').forEach(b => b.classList.remove('selected'));
    button.classList.add('selected');

    selectedArea = button.textContent.trim();
    // applyFilters()ã¯å‘¼ã°ãªã„ï¼
  });
});

  // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼å‡¦ç†æœ¬ä½“
  function applyFilters() {
  const keyword = document.getElementById('keywordInput').value.trim().toLowerCase();
  const items = document.querySelectorAll('.result-item');

  items.forEach(item => {
    const itemTitle = item.dataset.title.toLowerCase();
    const itemGenre = item.dataset.genre;
    const itemArea = item.dataset.area;

    const matchKeyword = !keyword || itemTitle.includes(keyword);
    const matchGenre = !selectedGenre || itemGenre === selectedGenre;
    const matchArea = !selectedArea || itemArea === selectedArea;

    item.style.display = (matchKeyword && matchGenre && matchArea) ? 'block' : 'none';
  });
  document.getElementById('filterUI').style.display = 'none';
  displaySelectedFilters(keyword, selectedGenre, selectedArea);
  document.getElementById('activeFilters').innerHTML = `
    <button onclick="resetFilters()">ğŸ”„ çµã‚Šè¾¼ã¿ã‚’è§£é™¤</button>
  `;
}


  // â–¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼è§£é™¤ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹æ¡ä»¶
  if (keyword || selectedGenre || selectedArea) {
    document.getElementById('activeFilters').innerHTML = `
      <button onclick="resetFilters()">ğŸ”„ çµã‚Šè¾¼ã¿ã‚’è§£é™¤</button>
    `;
  } else {
    document.getElementById('activeFilters').innerHTML = '';
  }

// çµè¾¼ã¿é¸æŠä¸­ã®å‹•ä½œ
function displaySelectedFilters(keyword, genre, area) {
  const container = document.getElementById('selectedFilters');
  container.innerHTML = ''; // ä¸€æ—¦æ¶ˆã™

  if (keyword) {
    const span = document.createElement('span');
    span.className = 'filter-tag';
    span.textContent = `#${keyword}`;
    container.appendChild(span);
  }
  if (genre) {
    const span = document.createElement('span');
    span.className = 'filter-tag';
    span.textContent = `#${genre}`;
    container.appendChild(span);
  }
  if (area) {
    const span = document.createElement('span');
    span.className = 'filter-tag';
    span.textContent = `#${area}`;
    container.appendChild(span);
  }

  if (!keyword && !genre && !area) {
    container.innerHTML = ''; // æ¡ä»¶ãªã—ãªã‚‰ç©ºã«ã™ã‚‹
  }
}


  // è§£é™¤
  function resetFilters() {
  selectedGenre = '';
  selectedArea = '';
  document.getElementById('keywordInput').value = '';

  // é¸æŠã•ã‚ŒãŸãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’æˆ»ã™
  document.querySelectorAll('.genre-item').forEach(b => b.classList.remove('selected'));
  document.querySelectorAll('.area-buttons button').forEach(b => b.classList.remove('selected'));

  // é¸æŠè¡¨ç¤ºã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼UIã‚’å…ƒã«æˆ»ã™
  document.getElementById('selectedFilters').innerHTML = '';
  document.getElementById('filterUI').style.display = 'block';

  // çµæœå…¨è¡¨ç¤º
  document.querySelectorAll('.result-item').forEach(item => item.style.display = 'block');

  // ãƒœã‚¿ãƒ³ã¯æ¶ˆã•ãªã„
  document.getElementById('activeFilters').innerHTML = `
    <button onclick="resetFilters()">ğŸ”„ çµã‚Šè¾¼ã¿ã‚’è§£é™¤</button>
  `;
}

// ã‚¸ãƒ£ãƒ³ãƒ«ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚
// ã‚¸ãƒ£ãƒ³ãƒ«ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚
document.querySelectorAll('.genre-item').forEach(button => {
  button.addEventListener('click', () => {
    // ä»–ã®ãƒœã‚¿ãƒ³ã®é¸æŠçŠ¶æ…‹ã‚’è§£é™¤
    document.querySelectorAll('.genre-item').forEach(b => b.classList.remove('selected'));
    // ä»Šã®ãƒœã‚¿ãƒ³ã ã‘é¸æŠçŠ¶æ…‹ã«
    button.classList.add('selected');

    // ã‚¸ãƒ£ãƒ³ãƒ«ã‚’ä¿å­˜ï¼ˆâ†ã“ã‚Œã ã‘ã§OKã€applyFiltersã¯å‘¼ã°ãªã„ï¼‰
    selectedGenre = button.dataset.genre;
  });
});

function filterArea(area) {
  // ä»–ã®ãƒœã‚¿ãƒ³ã®é¸æŠçŠ¶æ…‹ã‚’è§£é™¤
  document.querySelectorAll('.area-buttons button').forEach(btn => btn.classList.remove('selected'));
  
  // è©²å½“ãƒœã‚¿ãƒ³ã‚’é¸æŠ
  const selectedBtn = Array.from(document.querySelectorAll('.area-buttons button')).find(b => b.textContent === area);
  if (selectedBtn) selectedBtn.classList.add('selected');

  // ã‚¨ãƒªã‚¢ã‚’ä¿å­˜ï¼ˆapplyFiltersã¯å‘¼ã°ãªã„ï¼‰
  selectedArea = area;
}

  </script>
  <script src="../../script.js"></script>
</body>
</html>

